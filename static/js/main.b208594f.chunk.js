(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{152:function(e,t,n){},232:function(e,t){},234:function(e,t){},248:function(e,t){},250:function(e,t){},278:function(e,t){},280:function(e,t){},281:function(e,t){},286:function(e,t){},288:function(e,t){},294:function(e,t){},296:function(e,t){},315:function(e,t){},327:function(e,t){},330:function(e,t){},348:function(e,t,n){},373:function(e,t,n){},374:function(e,t,n){},375:function(e,t,n){},376:function(e,t,n){},379:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),a=n(14),r=n.n(a),o=n(11),s=n(1),l=i.a.createContext();var u=function(e){var t=Object(c.useState)(4),n=Object(o.a)(t,2),i=n[0],a=n[1],r=Object(c.useState)(!1),u=Object(o.a)(r,2),d=u[0],j=u[1],b={numberOfItems:i,showCompleted:d,setNumberOfItems:function(e){a(e)},setCompleted:function(e){j(e)}};return Object(s.jsx)(l.Provider,{value:b,children:e.children})},d=n(85),j=n.n(d),b=n(86),O=n.n(b),m=i.a.createContext(),h={admin:{username:"admin",password:"test",role:"admin",capabilities:["create","read","update","delete"]},editor:{username:"editor",password:"test",role:"editor",capabilities:["read","update"]},writer:{username:"writer",password:"test",role:"writer",capabilities:["create"]}},f=Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SECRET||"secretstring";var p=function(e){var t=e.children,n=Object(c.useState)(null),i=Object(o.a)(n,2),a=i[0],r=i[1],l=Object(c.useState)(!1),u=Object(o.a)(l,2),d=u[0],b=u[1],p=Object(c.useState)({}),x=Object(o.a)(p,2),g=x[0],v=x[1],C={isLoggedIn:d,user:g,isAuthorized:function(e){var t;return null===g||void 0===g||null===(t=g.capabilities)||void 0===t?void 0:t.includes(e)},login:function(e,t){var n=h[e];if(n&&n.password===t){S(j.a.sign(n,f))}},logout:function(){d&&I(!1,null,{})},token:a,validateToken:S,setLogInState:I};function S(e){try{var t=j.a.verify(e,f);console.log("validate Token User:",t),I(!0,e,t)}catch(n){I(!1,null,{}),console.log("Error validating token:",n)}}function I(e,t,n){O.a.save("auth",t),b(e),r(t),v(n)}return Object(c.useEffect)((function(){var e=new URLSearchParams(window.location.search),t=O.a.load("auth"),n=e.get("token")||t||null;S(n),console.log("useeffect token:",n)}),[]),Object(s.jsx)(m.Provider,{value:C,children:t})},x=n(20),g=n(169),v=(n(152),n(45));var C=function(){var e=Object(c.useContext)(m),t=Object(c.useState)(""),n=Object(o.a)(t,2),i=n[0],a=n[1],r=Object(c.useState)(""),l=Object(o.a)(r,2),u=l[0],d=l[1];function j(e){var t=e.target,n=t.name,c=t.value;"username"===n&&a(c),"password"===n&&d(c)}return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(v.a,{condition:e.isLoggedIn,children:Object(s.jsx)("button",{onClick:e.logout,children:"Log Out"})}),Object(s.jsx)(v.a,{condition:!e.isLoggedIn,children:Object(s.jsxs)("form",{onSubmit:function(t){console.log("submit"),t.preventDefault(),e.login(i,u)},children:[Object(s.jsx)("input",{placeholder:"username",name:"username",onChange:j}),Object(s.jsx)("input",{placeholder:"password",name:"password",onChange:j}),Object(s.jsx)("button",{type:"submit",children:"Login"})]})})]})};var S=function(e){var t=Object(c.useContext)(m),n=t.isLoggedIn,i=!e.capability||t.isAuthorized(e.capability),a=n&&i;return Object(s.jsx)(v.a,{condition:a,children:e.children})},I=n(87),y=function(e){var t=Object(c.useState)({}),n=Object(o.a)(t,2),i=n[0],a=n[1];return{handleChange:function(e){e.persist(),a((function(t){return Object(I.a)(Object(I.a)({},t),{},Object(x.a)({},e.target.name,e.target.value))}))},handleSubmit:function(t){t&&t.preventDefault(),e(i)},values:i}},w=n(384),T=n(383),k=n(43);n(348);var D=function(e){return Object(s.jsx)(T.c,{id:"navBar",children:Object(s.jsxs)(T.c.Group,{align:k.a.LEFT,children:[Object(s.jsxs)(T.c.Heading,{id:"heading",children:["To Do List: ",e.incomplete," items pending"]}),Object(s.jsx)(T.c.Divider,{})]})})};n(373);var E=function(e){return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(s.jsx)("h2",{children:"Add To Do Item"}),Object(s.jsxs)("label",{children:[Object(s.jsx)("span",{children:"To Do Item"}),Object(s.jsx)("input",{onChange:e.handleChange,name:"text",type:"text",placeholder:"Item Details"})]}),Object(s.jsxs)("label",{children:[Object(s.jsx)("span",{children:"Assigned To"}),Object(s.jsx)("input",{onChange:e.handleChange,name:"assignee",type:"text",placeholder:"Assignee Name"})]}),Object(s.jsxs)("label",{children:[Object(s.jsx)("span",{children:"Difficulty"}),Object(s.jsx)("input",{onChange:e.handleChange,defaultValue:3,type:"range",min:1,max:5,name:"difficulty"})]}),Object(s.jsx)("label",{children:Object(s.jsx)("button",{type:"submit",children:"Add Item"})})]})})},L=n(22),P=(n(374),function(e){var t=Object(c.useContext)(l);return Object(s.jsxs)(T.b,{id:"todoCard",interactive:!0,elevation:L.a.FOUR,children:[Object(s.jsx)("h5",{children:e.item.text}),Object(s.jsx)("p",{children:Object(s.jsxs)("small",{children:["Assigned to: ",e.item.assignee]})}),Object(s.jsx)("p",{children:Object(s.jsxs)("small",{children:["Difficulty: ",e.item.difficulty]})}),Object(s.jsxs)(T.a,{id:"complete",onClick:function(){e.toggleComplete(e.item.id),!0===e.item.complete&&"false"===t.showCompleted&&e.deleteItem(e.item.id)},children:["Complete: ",e.item.complete.toString()]}),Object(s.jsx)(T.a,{id:"delete",onClick:function(){return e.deleteItem(e.item.id)},children:"Delete"})]},e.item.id)});n(375);var A=function(e){var t=Object(c.useContext)(l),n=Object(c.useState)(1),i=Object(o.a)(n,2),a=i[0],r=i[1];function u(e){"next"!==e.target.id?"prev"!==e.target.id||r(a-1):r(a+1)}var d=a*t.numberOfItems,j=d-t.numberOfItems,b=e.list.slice(j,d);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{id:"cardContainer",children:b.map((function(t){return Object(s.jsx)(P,{item:t,toggleComplete:e.toggleComplete,deleteItem:e.deleteItem},t.id)}))}),Object(s.jsxs)("div",{id:"nextPrevButtons",children:[a>1?Object(s.jsx)("button",{id:"prev",onClick:u,type:"button",children:"Back"}):null,e.list.length>t.numberOfItems?Object(s.jsx)("button",{id:"next",onClick:u,type:"button",children:"Next"}):null]})]})};n(376);var _=function(){var e=Object(c.useContext)(l),t=Object(c.useState)(!1),n=Object(o.a)(t,2),i=n[0],a=n[1];return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=JSON.stringify({numberOfItems:e.numberOfItems,showCompleted:e.showCompleted});localStorage.setItem("userPreferences",n)},children:[Object(s.jsx)("h2",{children:"Change Your View"}),Object(s.jsxs)(T.e,{label:"Show Completed Tasks?",onChange:function(t){e.setCompleted(t.target.value),console.log(e.showCompleted),a(t.currentTarget.value)},selectedValue:i,children:[Object(s.jsx)(T.d,{label:"Yes",value:"true"}),Object(s.jsx)(T.d,{label:"No",value:"false"})]}),Object(s.jsxs)("label",{children:[Object(s.jsx)("span",{children:"Tasks per page"}),Object(s.jsx)("input",{onChange:function(t){e.setNumberOfItems(parseInt(t.target.value))},min:"0",step:"1",name:"tasksPerPage",type:"number"})]}),Object(s.jsx)("label",{children:Object(s.jsx)("button",{type:"submit",children:"Add Item"})})]})})};function N(){var e,t,n=Object(c.useContext)(l),i=Object(c.useState)([]),a=Object(o.a)(i,2),r=a[0],u=a[1],d=Object(c.useState)([]),j=Object(o.a)(d,2),b=j[0],O=j[1],m=y((function(e){e.id=Object(w.a)(),e.complete=!1,r.includes(e)?alert("That to-do item already exsists!"):u([].concat(Object(g.a)(r),[e]))})),h=m.handleChange,f=m.handleSubmit;return Object(c.useEffect)((function(){var e=r.filter((function(e){return!e.complete})).length;O(e),document.title="To Do List: ".concat(b)}),[r]),Object(c.useEffect)((function(){var e=localStorage.getItem("userPreferences");if(e){var t=JSON.parse(e);console.log("local storage",t),n.setNumberOfItems(t.numberOfItems),n.setCompleted(t.showCompleted)}}),[]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(C,{}),Object(s.jsx)(S,(e={capability:"read"},Object(x.a)(e,"capability","create"),Object(x.a)(e,"children",Object(s.jsx)(D,{incomplete:b})),e)),Object(s.jsx)(S,{capability:"create",children:Object(s.jsxs)("div",{id:"formContainer",children:[Object(s.jsx)(_,{}),Object(s.jsx)(E,{handleSubmit:f,handleChange:h})]})}),Object(s.jsx)(S,(t={capability:"read"},Object(x.a)(t,"capability","create"),Object(x.a)(t,"children",Object(s.jsx)(A,{list:r,toggleComplete:function(e){var t=r.map((function(t){return t.id===e&&(t.complete=!t.complete),t}));u(t)},deleteItem:function(e){var t=r.filter((function(t){return t.id!==e}));u(t)}})),t))]})}n(377),n(378);r.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(u,{children:Object(s.jsx)(p,{children:Object(s.jsx)(N,{})})})}),document.getElementById("root"))}},[[379,1,2]]]);
//# sourceMappingURL=main.b208594f.chunk.js.map